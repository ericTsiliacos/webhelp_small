
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head><meta xmlns="http://www.w3.org/1999/xhtml" name="description" content="GemFire XD manages data in a flexible way that enables you to expand or contract your cluster at runtime to support different loads. To dynamically add more capacity to a cluster, you add new server ..."/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="copyright" content="(C) Copyright 2005"/><meta name="DC.rights.owner" content="(C) Copyright 2005"/><meta name="DC.Type" content="concept"/><meta name="DC.Title" content="Add Servers to the Cluster and Stop Servers"/><meta name="abstract" content="GemFire XD manages data in a flexible way that enables you to expand or contract your cluster at runtime to support different loads. To dynamically add more capacity to a cluster, you add new server members and specify the -rebalance option."/><meta xmlns="http://www.w3.org/1999/xhtml" name="description" content="GemFire XD manages data in a flexible way that enables you to expand or contract your cluster at runtime to support different loads. To dynamically add more capacity to a cluster, you add new server members and specify the -rebalance option."/><meta name="DC.Relation" scheme="URI" content="../tutorial_chapter_intro.html"/><meta name="DC.Format" content="XHTML"/><meta name="DC.Identifier" content="concept_6A252EAA3FCB4E9D8BD687B40247AE8F"/><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Add Servers to the Cluster and Stop Servers</title><meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Type" content="text/html; charset=utf-8"><!----></meta><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/pivotal.css"/><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" id="concept_6A252EAA3FCB4E9D8BD687B40247AE8F"><script xmlns="http://www.w3.org/1999/xhtml" src="//use.typekit.net/clb0qji.js" type="text/javascript"/><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			  try {
				  Typekit.load();
			  } catch (e) {
			  }
		  </script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			  document.domain = "pivotal.io";
		  </script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			WebFontConfig = {
			  google: { families: [ 'Source+Sans+Pro:300italic,400italic,300,400,600:latin' ] }
			};
			(function() {
			  var wf = document.createElement('script');
			  wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
				'://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
			  wf.type = 'text/javascript';
			  wf.async = 'true';
			  var s = document.getElementsByTagName('script')[0];
			  s.parentNode.insertBefore(wf, s);
			})();
		  </script>
<table class="nav"><tbody><tr><td colspan="2"><div id="permalink"><a href="#" title="Link to this page"/></div><div id="printlink"><a href="javascript:window.print();" title="Print this page"/></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="../book_intro.html" title="Getting Started with GemFire XD provides step-by-step procedures for installing, configuring, and using GemFire XD. The guide also explains main concepts and provides tutorials to help you quickly begin using GemFire XD.">Getting Started with GemFire XD</a> / <a class="navheader_parent_path" href="../tutorial_chapter_intro.html" title="Learn to configure and use GemFire XD features such as table replication and partitioning, persisting data to local disk stores and HDFS, and dynamically resizing the cluster.">QuickStart Tutorials</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="../tutorial_chapter_intro.html" title="Learn to configure and use GemFire XD features such as table replication and partitioning, persisting data to local disk stores and HDFS, and dynamically resizing the cluster."><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">QuickStart Tutorials</span></a></span>  </div></td></tr></tbody></table>
 
  <h1 class="title topictitle1">Add Servers to the Cluster and Stop Servers</h1>
 
   
  <div class="body conbody"><p class="shortdesc">GemFire XD manages data in a flexible way that enables you to expand
	 or contract your cluster at runtime to support different loads. To dynamically
	 add more capacity to a cluster, you add new server members and specify the 
	 <span class="keyword cmdname">-rebalance</span> option. 
  </p>
 
	 <div class="p" id="concept_6A252EAA3FCB4E9D8BD687B40247AE8F__p_EC8A9363132641DAA3DC709834D43392"> 
		<strong class="ph b">Procedure</strong> 
	 <ol class="ol" id="concept_6A252EAA3FCB4E9D8BD687B40247AE8F__ol_B04C1057A5D54614950B130723A1DF2F"> 
		<li class="li" id="concept_6A252EAA3FCB4E9D8BD687B40247AE8F__li_DDFA968BBD884D709F879C9C6FC516B5">Open a new terminal or command prompt window, and
					create a directory for the new server:
					<pre class="pre codeblock">$ <strong class="ph b">cd ~</strong>
$ <strong class="ph b">mkdir server3</strong></pre>

				</li>
 
		<li class="li" id="concept_6A252EAA3FCB4E9D8BD687B40247AE8F__li_80A417FEFBCC433D96B2CCD68D1E43E4">When you add a new server to the cluster, you can
					specify the <span class="keyword cmdname">-rebalance</span> option to move partitioned table data
					buckets between host members as needed to establish the best balance of data
					across the distributed system. (See <a class="xref" href="../../data_management/rebalancing_pr_data.html#rebalancing_pr_data" title="You can use rebalancing to dynamically increase or decrease your GemFire XD cluster capacity, or to improve the balance of data across the distributed system.">Rebalancing Partitioned Data on GemFire XD Members</a>
					for more information.) Start the new server to see rebalancing in action:
					<pre class="pre codeblock">$ <strong class="ph b">gfxd server start -dir=$HOME/server3 -locators=localhost[10101] -client-port=1530 -rebalance</strong>
Starting GemFireXD Server using locators for peer discovery: localhost[10101]
Starting network server for GemFireXD Server at address localhost/127.0.0.1[1530]
Logs generated in /home/gpadmin/server3/gfxdserver.log
GemFireXD Server pid: 41165 status: running
  Distributed system now has 4 members.
  Other members: 192.168.125.147(39381:locator)&lt;v0&gt;:50344, 192.168.125.147(40612:datastore)&lt;v5&gt;:11337, 192.168.125.147(40776:datastore)&lt;v6&gt;:31019</pre>

				</li>
 
		<li class="li" id="concept_6A252EAA3FCB4E9D8BD687B40247AE8F__li_0D0F3DCB1A634161855F703DB1002D22">View the contents of the new GemFire XD directory: <pre class="pre codeblock">$ <strong class="ph b">ls server3</strong>
BACKUPGFXD-DEFAULT-DISKSTORE_1.crf  DRLK_IFGFXD-DEFAULT-DISKSTORE.lk
BACKUPGFXD-DEFAULT-DISKSTORE_1.drf  gfxdserver.log
BACKUPGFXD-DEFAULT-DISKSTORE.if     start_gfxdserver.log
datadictionary</pre>

					<p class="p">Notice that the new GemFire XD server also persists the available table data,
						and contains the same disk store files as the other two servers. </p>

				</li>
 
		<li class="li" id="concept_6A252EAA3FCB4E9D8BD687B40247AE8F__li_D2489F9FD6194FAEB93DE2152834E5B2"> You can view all members of the distributed system
					using <span class="keyword cmdname">gfxd</span>. Return to the <span class="keyword cmdname">gfxd</span> session
					window and execute the query:
					<pre class="pre codeblock">gfxd&gt; <strong class="ph b">select id from sys.members;</strong>
ID                                                                             
-------------------------------------------------------------------------------
192.168.125.147(40612)&lt;v5&gt;:11337                                               
192.168.125.147(39381)&lt;v0&gt;:50344                                               
192.168.125.147(40776)&lt;v6&gt;:31019                                               
192.168.125.147(41165)&lt;v7&gt;:35662                                               

4 rows selected</pre>

				</li>
 
		<li class="li" id="concept_6A252EAA3FCB4E9D8BD687B40247AE8F__li_3CB5F75E227244DC99247F994FC1C123">Verify that all servers now host the data:
					<pre class="pre codeblock">gfxd&gt; <strong class="ph b">select distinct dsid() as id from flights;</strong>
ID                                                                             
-------------------------------------------------------------------------------
192.168.125.147(40612)&lt;v5&gt;:11337                                               
192.168.125.147(40776)&lt;v6&gt;:31019                                               
192.168.125.147(41165)&lt;v7&gt;:35662                                               

3 rows selected</pre>

				</li>
 
		<li class="li" id="concept_6A252EAA3FCB4E9D8BD687B40247AE8F__li_EB9B9DE5EE834C5EB75D3595284D3FC9">Examine the table data that each server hosts:
					<pre class="pre codeblock">gfxd&gt; <strong class="ph b">select count(*) memberRowCount, dsid() from flights group by dsid();</strong>
MEMBERROWCOUNT|2                                                               
-------------------------------------------------------------------------------
150           |192.168.125.147(40612)&lt;v5&gt;:11337                                
114           |192.168.125.147(40776)&lt;v6&gt;:31019                                
278           |192.168.125.147(41165)&lt;v7&gt;:35662                                

3 rows selected</pre>

				</li>
 
		<li class="li" id="concept_6A252EAA3FCB4E9D8BD687B40247AE8F__li_E890B4E6AAEE4477A69B372156231250">Exit the <span class="keyword cmdname">gfxd</span> session:
					<pre class="pre codeblock">gfxd&gt; <strong class="ph b">exit;</strong></pre>

				</li>
 
		<li class="li" id="concept_6A252EAA3FCB4E9D8BD687B40247AE8F__li_52BB23BA747F4D07AC43027C9DDC4D89">You can stop an individual GemFire XD server by using
					the <span class="keyword cmdname">gfxd server stop</span> command and specifying the server
					directory. To shut down all data stores at once, use the <span class="keyword cmdname">gfxd
						shut-down-all</span> command:
					<pre class="pre codeblock">$ <strong class="ph b">gfxd shut-down-all -locators=localhost[10101]</strong>
Connecting to distributed system: locators=localhost[10101]
Successfully shut down 3 members</pre>

				</li>

				<li class="li">After all data stores have stopped, shut down the locator as
					well:<pre class="pre codeblock">$ <strong class="ph b">gfxd locator stop -dir=$HOME/locator</strong>
The GemFireXD Locator has stopped.</pre>
</li>
 
	 </ol>
 
	 </div>
 
  </div>
 
<div class="related-links"/>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../tutorial_chapter_intro.html" title="Learn to configure and use GemFire XD features such as table replication and partitioning, persisting data to local disk stores and HDFS, and dynamically resizing the cluster."><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">QuickStart Tutorials</span></a></span>  </div><div>
<div class="container">
  <footer class="site-footer-links">
    <div class="copyright">
      <a href="http://docs.pivotal.io" target="_blank">Pivotal Documentation</a>
      © 2014 <a href="http://www.pivotal.io/" target="_blank">Pivotal Software</a>, Inc. All Rights Reserved.
  </div>
  <div class="support">
    Need help? <a href="http://support.pivotal.io" target="_blank">Visit Support</a>
   </div>
  </footer>
</div><!--end of container-->
</div>
</body>
</html>